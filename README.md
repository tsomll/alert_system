# alert_system

## Описание

Этот проект реализует автоматическую систему алертов, которая срабатывает при резких изменениях ключевых метрик пользовательской активности. Система запускается каждые 15 минут с помощью Apache Airflow DAG и отслеживает поведение метрик в сравнении с таким же интервалом предыдущего дня.

## Цель

Обнаруживать аномальные значения в пользовательской активности и уведомлять об этом через алерт, содержащий:

- Название метрики
- Текущее значение
- Величину и направление отклонения
- Дополнительную информацию в виде графика

## Мониторинг включает следующие метрики:

- DAU в ленте (feed)
- DAU в мессенджере
- Количество просмотров
- Количество лайков
- CTR
- Количество отправленных сообщений

## Метод детектирования аномалий

На первом этапе реализован простой статистический подход:  
сравнение текущего значения метрики с её значением в такой же 15-минутный интервал предыдущего дня.  
Если отклонение превышает заданный порог — метрика считается аномальной.

## Архитектура DAG

- DAG запускается каждые 15 минут
- Метрики считываются из ClickHouse
- Производится сравнение значений и расчёт отклонений
- При обнаружении отклонения формируется сообщение и (опционально) отправляется в чат
- Построенный график прикладывается к алерту
